<div class="container-fluid mt-5  ">
  <div class="row">
    <div class="col-md-5 d-flex align-items-center justify-content-center">
      <img [src]="imgURL" alt="img" class="img max-width-100 my-3" style="max-width: 150px;" >
    </div>
    <div class="col-md-2 align-self-center">
      <h1 class="text-center" >Directorio Grupo PB</h1>
    </div>
  </div>
</div>

    <div class="container-fluid text-center bg-primary justify-content-center align-items-center" style="min-height: 250px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
      <div class="container" >

        <div class="form-group ">
          <div class="row mt-6">
            <div class="col-md-12 col-lg-12 mt-2  ">
              <label for="inputNombre" class="form-label text-white ">Nombre</label>
              <input [(ngModel)]="searchUsuario" aria-label="Nombre" type="text" class="form-control inputserch"
                name="searchUsuario" >
            </div>
            <div class="col-md-12 col-lg-6 mt-2">
              <label for="inputNombre" class="form-label   text-white ">Departamento</label>
              <input [(ngModel)]="searchPuesto" type="text" class="form-control inputserch"
                name="searchPuesto" >
                 
            </div>
            <div class="col-md-12 col-lg-6 mt-2">
              <label for="inputNombre" class="form-label text-white ">País</label>
                <select [(ngModel)]="searchPais" type="text" class="form-control inputserch"
                name="searchPais">
                  <option value="Guatemala">Guatemala</option>
                  <option value="El Salvador">El Salvador</option>
                  <option value="Nicaragua">Nicaragua</option>
                  <option value="Honduras">Honduras</option>
                  <option value="Costa Rica">Costa Rica</option>
                  <option value="Panama">Panamá</option>
                </select>
            </div>
          </div>
          <div class="row mt-4 ">
            <div class="col my-4" >
              <button  *ngIf="role ==='ADMINP'" type="button" class="btn btn-warning text-white" (clic)="nuevoUsuario" data-bs-toggle="modal" data-bs-target="#exampleModal" >Nuevo Contacto </button>
            </div>
            <div class="col my-4 " >
              <button  *ngIf="!isAuthenticated" type="button" class="btn btn-warning text-white " (clic)="login" data-bs-toggle="modal" data-bs-target="#exampleModa2" > Ver más </button>

            </div>
            <div class="col my-4 " >
              <button *ngIf="isAuthenticated" class="btn btn-warning text-white" routerLink="sign-in" (click)="VaciarToken()">Cerrar Sesión</button>            

            </div>
  
          </div>
      </div>
      

      </div>
    </div>

<div class="container mt-5">
      <div class="table-responsive">
        <div class="scrolltable">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col">Nombre</th>
                  <th scope="col">Apellido</th>
                  <th scope="col">Correo</th>
                  <th scope="col">Puesto</th>
                  <th scope="col">Celular Corporativo</th>
                  <th *ngIf="role === 'ADMINP'"  scope="col">Extensión</th>
                  <th *ngIf="role === 'USUARIO'" scope="col">Extensión</th>
          
                  <th scope="col">Sucursal</th>
                  <th scope="col">Departamento</th>
                  <th scope="col">Pais</th>
                  <th scope="col" *ngIf="role === 'ADMINP'"> Opciones </th>
                </tr>
              </thead>
              <tbody>
                <tr  *ngFor="let us of usuarioModelGet | searchUsuario:searchUsuario | searchPuesto:searchPuesto |  searchPais:searchPais " (click)="SetID(us._id)  " >
                  
                  <td>{{us.nombre}}</td>
                  <td>{{us.apellido}}</td>
                  <td>{{us.email}}</td>
                  <td>{{us.puesto}}</td>
                  <td>{{us.celular_Corporativo}}</td>
                  <td *ngIf="role === 'ADMIN'" >{{us.extencion}}</td>
                  <td *ngIf="role === 'USUARIO'" >{{us.extencion}}</td>
                  <td>{{us.sucursal}}</td>
                  <td>{{us.departamento}}</td>
                  <td>{{us.pais}}</td>
                  <td *ngIf="role === 'ADMINP'">
                      <div  class="card-footer p-4 pt-0 bg-transparent border-top-0">
                          <div class="d-flex align-items-end justify-content-between">
                              <button type="button" class="btn btn-warning text-white" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" (click)="getUsuarioId(us._id)">Editar</button>
                              <button type="button" class="btn btn-danger" (click)="deleteUser(us._id)">Eliminar</button>
                          </div>
                      </div>
                  </td>
                </tr>
                
              </tbody>
            </table>
        </div>
    </div>
       <!-- "OffCanvas" Editar Evento -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasExampleLabel">Editar Contacto</h5>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form>
                    <div class="mg-3">
                        <label for="inputNombre" class="form-label">Nombre </label>
                        <input type="text" id="inputNombre" class="form-control" name="nombre" #nombre="ngModel" [(ngModel)]="usuarioModelGetId.nombre">
                    </div>
                    <div class="mg-3">
                        <label for="inputHora" class="form-label">Apellido</label>
                        <input type="text" id="inputHora" class="form-control" name="apellido" #apellido="ngModel" [(ngModel)]="usuarioModelGetId.apellido">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Correo</label>
                        <input type="text " id="inputCorreo" class="form-control " name="email" #email="ngModel" [(ngModel)]="usuarioModelGetId.email">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Extensión</label>
                        <input type="text " id="inputExtencion" class="form-control " name="extencion" #extencion="ngModel" [(ngModel)]="usuarioModelGetId.extencion">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Pais</label>
                        <input type="text " id="inputPais" class="form-control " name="pais" #pais="ngModel" [(ngModel)]="usuarioModelGetId.pais">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Puesto</label>
                        <input type="text " id="inputPuesto" class="form-control " name="puesto" #puesto="ngModel" [(ngModel)]="usuarioModelGetId.puesto">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Departamento</label>
                        <input type="text " id="inputDepartamento" class="form-control " name="departamento" #departamento="ngModel" [(ngModel)]="usuarioModelGetId.departamento">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Celular Corporativo</label>
                        <input type="text " id="inputCelular" class="form-control " name="celular_Corporativo" #celular_Corporativo="ngModel" [(ngModel)]="usuarioModelGetId.celular_Corporativo">
                    </div>
                    <div class=" mg-3 ">
                        <label for="inputFecha" class="form-label ">Sucursal</label>
                        <input type="text " id="inputSucursal" class="form-control " name="sucursal" #sucursal="ngModel" [(ngModel)]="usuarioModelGetId.sucursal">
                    </div>
        
                    <button *appRecarga="" type="submit" class="btn btn-warning text-white" (click)="putUser()"  data-bs-dismiss="offcanvas">Guardar Cambios</button>
                </form>
            </div>
        </div>
    </div>






<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLabel">Registrar un nuevo Contacto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="row g-3 needs-validation" novalidate >
                    
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Nombre</label>
                        <input type="text"  class="form-control" id="validationDefault01" required aria-describedby="nameHelp" name="nombre" #nombre="ngModel" [(ngModel)]="usuarioModelPost.nombre">
                        <div id="nameHelp" class="form-text" required></div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Apellido</label>
                        <input type="text" class="form-control" id="exampleInputApellido" aria-describedby="addresHelp" name="apellido" #apellido="ngModel" [(ngModel)]="usuarioModelPost.apellido">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Correo</label>
                        <input type="text" class="form-control" id="exampleInputAdressCorreo" aria-describedby="addresHelp" name="email" #email="ngModel" [(ngModel)]="usuarioModelPost.email">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Extensión</label>
                        <input type="text" class="form-control" id="exampleIputAddressExtencion" aria-describedby="addresHelp" name="extencion" #extencion="ngModel" [(ngModel)]="usuarioModelPost.extencion">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class=" mb-3">
                        <label for="exampleInputEmail1" class="form-label">País</label>
                        <select class="form-select" id="inputGroupSelect01"  aria-describedby="addresHelp" name="pais" #pais="ngModel" [(ngModel)]="usuarioModelPost.pais">
                          <option value="Guatemala">Guatemala</option>
                          <option value="El Salvador">El Salvador</option>
                          <option value="Nicaragua">Nicaragua</option>
                          <option value="Honduras">Honduras</option>
                          <option value="Costa Rica">Costa Rica</option>
                          <option value="Panama">Panamá</option>
                        </select>
                      </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Puesto</label>
                        <input type="text" class="form-control" id="examleInputAddressPuesto" aria-describedby="addresHelp" name="puesto" #puesto="ngModel" [(ngModel)]="usuarioModelPost.puesto">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Departamento</label>
                        <input type="text" class="form-control" id="exampleInputAddrsDepartamento" aria-describedby="addresHelp" name="departamento" #departamento="ngModel" [(ngModel)]="usuarioModelPost.departamento">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Celular Corporativo</label>
                        <input type="text" class="form-control" id="Clular" aria-describedby="" name="celular_Corporativao" #celular_Corporativo="ngModel" [(ngModel)]="usuarioModelPost.celular_Corporativo">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Sucursal</label>
                        <input type="text" class="form-control" id="Celula" aria-describedby="" name="Sucursal" #sucursal="ngModel" [(ngModel)]="usuarioModelPost.sucursal">
                        <div id="addresHelp" class="form-text"></div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputEmail1" class="form-label">Contraseña</label>
                        <input type="password" class="form-control" id="epleInputAddressContraseña" aria-describedby="addresHelp" name="password" #password="ngModel" [(ngModel)]="usuarioModelPost.password">
                        <div id="addresHelp" class="form-text"></div>
                        <br>
                    </div>

                
                </form>
            </div>
            <div class="modal-footer">
                <br>
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-warning text-white" (click)="postUser()" data-bs-dismiss="modal">Guardar cambios</button>
            </div>
        </div>
    </div>
</div>




<div class="modal fade" id="exampleModa2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLabel">Ingrese la contras</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="row g-3 needs-validation" novalidate >
                      <!-- Password input -->
                      <div class="form-outline mb-3">
                        <label class="form-label" for="form3Example4">Contraseña</label>
                        <input type="password" id="form3Example4" class="form-control form-control-lg" placeholder=""
                          name="password" #password="ngModel" [(ngModel)]="userModel.password" />
                        
                      </div>
                </form>
            </div>
            <div class="modal-footer">
                <br>
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-warning text-white" (click)="login()" data-bs-dismiss="modal">inicar Sesion</button>
            </div>
        </div>
    </div>
</div>



<script>
    (function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>